<form action="" method="post" enctype="multipart/form-data">{% csrf_token %}

{% load staticfiles %}
<h2>Customer Documents</h2>
<table>
    <tr>
        <td>Upload Document:</td>
        <td><input id="fileupload" type="file" name="file" data-url="{% url 'information_customer_documents_upload' customer_id %}" multiple></td>
    </tr>
    <tr>
        <td colspan="2">
            <div id="progress">
                <span id="upload_percent">No uploads occuring</span>
                <div id="upload_progress" style="background-color: green; width: 0%; height: 20px;"></div>
            </div>
        </td>
    </tr>


</table>
<script src="{% static '/NearBeach/javascript/jquery/jquery-3.2.1.min.js' %}"></script>
<script src="{% static '/NearBeach/javascript/jQuery-File-Upload-9.19.2/js/vendor/jquery.ui.widget.js' %}"></script>
<script src="{% static '/NearBeach/javascript/jQuery-File-Upload-9.19.2/js/jquery.iframe-transport.js' %}"></script>
<script src="{% static '/NearBeach/javascript/jQuery-File-Upload-9.19.2/js/jquery.fileupload.js' %}"></script>



<script>
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
            load_customer_documents_list();
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $("#upload_percent").html(progress + "%");
            $("#upload_progress").css(
                'width', progress + '%',
            );
        }
    });
});
</script>
</form>
{% if customer_document_results %}
    <h4>Customer Documents</h4>
    {% for row in customer_document_results %}
        {% if row.document_description == "" %}
            <a href="https://{{ request.META.HTTP_HOST }}{{ PRIVATE_MEDIA_URL }}{{ row.document_key.document_key }}">-- {{ row.document_key.document }}</a><br/>
        {%  else %}
            <a href="https://{{ request.META.HTTP_HOST }}{{ PRIVATE_MEDIA_URL }}{{ row.document_key.document_key }}">-- {{ row.document_key.document_description }}</a><br/>
        {% endif %}
    {% endfor %}
{% endif %}
<br/>
{% if organisation_document_results %}
    <h4>Organisation Documents</h4>
    {% for row in organisation_document_results %}
        {% if row.document_key.document_description == "" %}
            <a href="https://{{ request.META.HTTP_HOST }}{{ PRIVATE_MEDIA_URL }}{{ row.document_key.document_key }}">-- {{ row.document_key.document }}</a><br/>
        {%  else %}
            <a href="https://{{ request.META.HTTP_HOST }}{{ PRIVATE_MEDIA_URL }}{{ row.document_key.document_key }}">{{ row.document_key.document_description }}</a><br/>
        {% endif %}
    {% endfor %}
{% endif %}