{% extends "./template.html" %}
{% block content %}
{% load nearbeach_extras %}
{% load static %}
    <script type="text/javascript" src="{% static 'NearBeach/javascript/csrf_finder.js' %}"></script>
    <link rel='stylesheet' href='{% static "NearBeach/css/kanban_board.css" %}' />
    <h2>Kanban Requirement</h2>
    <h4>{{ requirement_results.requirement_title }}</h4>

    <table>
        <!--render the header-->
        <tr>
            {% for item_status in item_status_results %}
                <td class="kanban_column_header">{{ item_status.requirement_item_status }}</td>
            {% endfor %}
        </tr>
        <!--render the body-->
        <tr>
            {% for item_status in item_status_results %}
                <td class="kanban_column" data-column="{{ item_status.requirement_item_status_id }}">
                    {% with requirement_items=requirement_item_results|filter_requirement_item_cards:item_status.requirement_item_status_id %}
                        {% for row in requirement_items %}
                            <div id="{{ row.requirement_item_id }}" class="requirement_item_card" draggable="true">
                                <div class="cardTitle" id="{{ row.requirement_item_id }}">
                                    {{ row.requirement_item_title }}
                                </div>
                            </div>
                        {% endfor %}
                    {% endwith %}
                </td>
            {% endfor %}
        </tr>
    </table>

{% endblock %}